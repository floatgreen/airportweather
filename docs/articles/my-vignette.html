<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>airportweather • airportweather</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="airportweather">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">airportweather</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/my-vignette.html">airportweather</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/floatgreen/airportweather">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>airportweather</h1>
            
            <h4 class="date">2019-04-26</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/floatgreen/airportweather/blob/master/vignettes/my-vignette.Rmd"><code>vignettes/my-vignette.Rmd</code></a></small>
      <div class="hidden name"><code>my-vignette.Rmd</code></div>

    </div>

    
    
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(airportweather)
<span class="co">#&gt; Loading required package: shiny</span></code></pre></div>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The site <a href="https://w1.weather.gov/xml/current_obs/" class="uri">https://w1.weather.gov/xml/current_obs/</a> provides access to observed current weather conditions for about 2,367 locations across 58 US States and Territories.</p>
<p><img src="../man/figures/select_state_location.png" width="70%"></p>
<p>The ueser can click the XML link to acess current weather report of an airport location. From the browser, different kinds of weather associated data is shown.</p>
<p><img src="../man/figures/Ames_current.png" width="70%"></p>
<ul>
<li>Weather</li>
<li>Temperature</li>
<li>Dewpoint</li>
<li>Relative Humidity</li>
<li>Wind</li>
<li>Wind Chill</li>
<li>Visibility</li>
<li>MSL Pressure</li>
</ul>
<p>Actully, the XML file contains more than 20 different types of weather data, as well as the location and time information of the observations. A link to “2 Day History” gives accesse of an HTML page contianing weather history data for past 72 hours.</p>
<p><img src="../man/figures/2dayhist.png" width="70%"></p>
<p>Thanks to the well orgnized weather data from National Weather Service website, the user can easily explore both the spatial and temporal aspect of weather of selected locations. However, the XML and HTML format need to be converted to dataframes before analysis. The package <code>airportweather</code> is designed as a efficient tool to scrape, extract, integrate and visualize the weather data of airport locations. The advantage of the package is it scrapes real time data from web when calling functions of the package, so the most up-to-date data is analyzed.</p>
</div>
<div id="package-data-preparation" class="section level2">
<h2 class="hasAnchor">
<a href="#package-data-preparation" class="anchor"></a>package data preparation</h2>
<p>The primer key of the weather data is <strong>4 characer CODE</strong> of airport loacations. Scraping from the root page <a href="https://w1.weather.gov/xml/current_obs/" class="uri">https://w1.weather.gov/xml/current_obs/</a> , we have collected all possibe airport code together with the name of location and the state/territory abbreviations correspond to the code. The data set <code>all_code.rda</code> contains 2,367 US airport codes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(<span class="dt">package =</span> <span class="st">"airportweather"</span>, <span class="st">"all_code"</span>)
pander<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/pander/topics/pandoc.table.return">pandoc.table</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(all_code))</code></pre></div>
<table class="table">
<colgroup>
<col width="11%">
<col width="9%">
<col width="44%">
</colgroup>
<thead><tr class="header">
<th align="center">State</th>
<th align="center">Code</th>
<th align="center">Name</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">ak</td>
<td align="center">PADK</td>
<td align="center">Adak Island, Adak Airport</td>
</tr>
<tr class="even">
<td align="center">ak</td>
<td align="center">PAUT</td>
<td align="center">Akun Airport</td>
</tr>
<tr class="odd">
<td align="center">ak</td>
<td align="center">PAFM</td>
<td align="center">Ambler, Ambler Airport</td>
</tr>
<tr class="even">
<td align="center">ak</td>
<td align="center">PAKP</td>
<td align="center">Anaktuvuk Pass, Anaktuvuk Pass Airport</td>
</tr>
<tr class="odd">
<td align="center">ak</td>
<td align="center">PAED</td>
<td align="center">Anchorage, Elmendorf Air Force Base</td>
</tr>
<tr class="even">
<td align="center">ak</td>
<td align="center">PALH</td>
<td align="center">Anchorage, Lake Hood Seaplane Base</td>
</tr>
</tbody>
</table>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"floatgreen/weatherstar"</span>)</code></pre></div>
</div>
<div id="functions" class="section level2">
<h2 class="hasAnchor">
<a href="#functions" class="anchor"></a>Functions</h2>
<div id="current_weatheridtype" class="section level3">
<h3 class="hasAnchor">
<a href="#current_weatheridtype" class="anchor"></a>current_weather(id,type)</h3>
</div>
<div id="current_weather_moreid_vector-type" class="section level3">
<h3 class="hasAnchor">
<a href="#current_weather_moreid_vector-type" class="anchor"></a>current_weather_more(id_vector, type)</h3>
</div>
<div id="plot_position" class="section level3">
<h3 class="hasAnchor">
<a href="#plot_position" class="anchor"></a>plot_position()</h3>
</div>
<div id="plot_temp_history" class="section level3">
<h3 class="hasAnchor">
<a href="#plot_temp_history" class="anchor"></a>plot_temp_history()</h3>
</div>
<div id="plot_weather" class="section level3">
<h3 class="hasAnchor">
<a href="#plot_weather" class="anchor"></a>plot_weather()</h3>
</div>
<div id="plot_weather_us" class="section level3">
<h3 class="hasAnchor">
<a href="#plot_weather_us" class="anchor"></a>plot_weather_us()</h3>
</div>
<div id="obhistory" class="section level3">
<h3 class="hasAnchor">
<a href="#obhistory" class="anchor"></a>obhistory()</h3>
<p>Usually, the <code>weather condition</code> (Sunny, Fog, etc..) and <code>air temperature</code>( in degrees Fahrenheit) are two most important elements in weather data. As a tiny example, obhistory() is able to retirve a table containing time, weather and temperature.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">KAMW_Table &lt;-<span class="st"> </span><span class="kw"><a href="../reference/obhistory.html">obhistory</a></span>(<span class="st">"KAMW"</span>)
pander<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/pander/topics/pandoc.table.return">pandoc.table</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(KAMW_Table))</code></pre></div>
<table class="table">
<caption>Table continues below</caption>
<colgroup>
<col width="9%">
<col width="11%">
<col width="30%">
<col width="30%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="center">date</th>
<th align="center">time</th>
<th align="center">localtime</th>
<th align="center">time_UTC</th>
<th align="center">Weather</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">23</td>
<td align="center">23:53</td>
<td align="center">2019-04-23 23:53:00</td>
<td align="center">2019-04-23 18:53:00</td>
<td align="center">Fair</td>
</tr>
<tr class="even">
<td align="center">24</td>
<td align="center">00:53</td>
<td align="center">2019-04-24 00:53:00</td>
<td align="center">2019-04-23 19:53:00</td>
<td align="center">Fair</td>
</tr>
<tr class="odd">
<td align="center">24</td>
<td align="center">01:53</td>
<td align="center">2019-04-24 01:53:00</td>
<td align="center">2019-04-23 20:53:00</td>
<td align="center">Fair</td>
</tr>
<tr class="even">
<td align="center">24</td>
<td align="center">02:53</td>
<td align="center">2019-04-24 02:53:00</td>
<td align="center">2019-04-23 21:53:00</td>
<td align="center">Fair</td>
</tr>
<tr class="odd">
<td align="center">24</td>
<td align="center">03:53</td>
<td align="center">2019-04-24 03:53:00</td>
<td align="center">2019-04-23 22:53:00</td>
<td align="center">Fair</td>
</tr>
<tr class="even">
<td align="center">24</td>
<td align="center">04:53</td>
<td align="center">2019-04-24 04:53:00</td>
<td align="center">2019-04-23 23:53:00</td>
<td align="center">Fair</td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col width="19%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th align="center">Temperature</th>
<th align="center">hday</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">47</td>
<td align="center">first24hours</td>
</tr>
<tr class="even">
<td align="center">43</td>
<td align="center">first24hours</td>
</tr>
<tr class="odd">
<td align="center">41</td>
<td align="center">first24hours</td>
</tr>
<tr class="even">
<td align="center">40</td>
<td align="center">first24hours</td>
</tr>
<tr class="odd">
<td align="center">40</td>
<td align="center">first24hours</td>
</tr>
<tr class="even">
<td align="center">40</td>
<td align="center">first24hours</td>
</tr>
</tbody>
</table>
<p>This function extract tables from HTML and select air tempereture as the variable of interest.</p>
<p>The tabe contains 7 columns,</p>
<table class="table">
<thead><tr class="header">
<th align="right">Variable</th>
<th align="right">Description</th>
<th align="center">Type</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">day</td>
<td align="right">correspond to the date, 1 as the earliest date</td>
<td align="center">factor</td>
</tr>
<tr class="even">
<td align="right">date</td>
<td align="right">the same as in the original html table</td>
<td align="center">chr</td>
</tr>
<tr class="odd">
<td align="right">time</td>
<td align="right">the same as in the original html table</td>
<td align="center">chr</td>
</tr>
<tr class="even">
<td align="right">fulltime</td>
<td align="right">the full formated time</td>
<td align="center">POSIXct</td>
</tr>
<tr class="odd">
<td align="right">Weather</td>
<td align="right">the Weather</td>
<td align="center">Factor</td>
</tr>
<tr class="even">
<td align="right">Temperature</td>
<td align="right">define the 1st, 2nd and 3rd 24 hours</td>
<td align="center">Factor</td>
</tr>
</tbody>
</table>
<p>Note that the returned dataframe has various number of rows, as the observation frequency is not fixed at each airport site. For instance, KAMW, where the weather data collected every hour will return 72 rows, while KORD, where data collected every 20 minutes, will return 216 rows.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">KORD_Table &lt;-<span class="st"> </span><span class="kw"><a href="../reference/obhistory.html">obhistory</a></span>(<span class="st">"KORD"</span>)
pander<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/pander/topics/pandoc.table.return">pandoc.table</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(KORD_Table))</code></pre></div>
<table class="table">
<caption>Table continues below</caption>
<colgroup>
<col width="9%">
<col width="10%">
<col width="29%">
<col width="29%">
<col width="20%">
</colgroup>
<thead><tr class="header">
<th align="center">date</th>
<th align="center">time</th>
<th align="center">localtime</th>
<th align="center">time_UTC</th>
<th align="center">Weather</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">23</td>
<td align="center">23:51</td>
<td align="center">2019-04-23 23:51:00</td>
<td align="center">2019-04-23 18:51:00</td>
<td align="center">Mostly Cloudy</td>
</tr>
<tr class="even">
<td align="center">24</td>
<td align="center">00:51</td>
<td align="center">2019-04-24 00:51:00</td>
<td align="center">2019-04-23 19:51:00</td>
<td align="center">Partly Cloudy</td>
</tr>
<tr class="odd">
<td align="center">24</td>
<td align="center">01:51</td>
<td align="center">2019-04-24 01:51:00</td>
<td align="center">2019-04-23 20:51:00</td>
<td align="center">Mostly Cloudy</td>
</tr>
<tr class="even">
<td align="center">24</td>
<td align="center">02:51</td>
<td align="center">2019-04-24 02:51:00</td>
<td align="center">2019-04-23 21:51:00</td>
<td align="center">Mostly Cloudy</td>
</tr>
<tr class="odd">
<td align="center">24</td>
<td align="center">03:51</td>
<td align="center">2019-04-24 03:51:00</td>
<td align="center">2019-04-23 22:51:00</td>
<td align="center">Mostly Cloudy</td>
</tr>
<tr class="even">
<td align="center">24</td>
<td align="center">04:51</td>
<td align="center">2019-04-24 04:51:00</td>
<td align="center">2019-04-23 23:51:00</td>
<td align="center">Mostly Cloudy</td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col width="19%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th align="center">Temperature</th>
<th align="center">hday</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">50</td>
<td align="center">first24hours</td>
</tr>
<tr class="even">
<td align="center">49</td>
<td align="center">first24hours</td>
</tr>
<tr class="odd">
<td align="center">48</td>
<td align="center">first24hours</td>
</tr>
<tr class="even">
<td align="center">47</td>
<td align="center">first24hours</td>
</tr>
<tr class="odd">
<td align="center">44</td>
<td align="center">first24hours</td>
</tr>
<tr class="even">
<td align="center">43</td>
<td align="center">first24hours</td>
</tr>
</tbody>
</table>
<p>An unusual case is that when the user run functions exactly at the time of an observation time, then the html will have one data point less than the normal cases, so does the rerurned dataframe.</p>
</div>
<div id="plot_temp_history-1" class="section level3">
<h3 class="hasAnchor">
<a href="#plot_temp_history-1" class="anchor"></a>plot_temp_history()</h3>
<p>It is insteresting to test</p>
</div>
<div id="runshiny" class="section level3">
<h3 class="hasAnchor">
<a href="#runshiny" class="anchor"></a>runShiny()</h3>
</div>
</div>
<div id="future-work" class="section level2">
<h2 class="hasAnchor">
<a href="#future-work" class="anchor"></a>future work</h2>
<p>Do we know names of all possible types of weather data?</p>
<p>We can retrieve and plot more continues data such as Relative Humidity for the past 3 days.</p>
<p>intergrate 3 tabs ( location, leaflet, timeseries) in one shiny app, as the project requirment need a complicated shiny.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#package-data-preparation">package data preparation</a></li>
      <li><a href="#installation">Installation</a></li>
      <li><a href="#functions">Functions</a></li>
      <li><a href="#future-work">future work</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Qing He, Jing Hou, Jing Li, Yuchen Wang, Ying Zheng.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
